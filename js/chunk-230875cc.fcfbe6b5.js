(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-230875cc"],{"54e2":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"head"},[a("Navbar")],1),a("div",{staticClass:"container"},[a("form",{staticClass:"wrapper",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit.apply(null,arguments)}}},[e._m(0),a("div",{staticClass:"form-label-group mb-2"},[a("label",{attrs:{for:"email"}},[e._v("電子郵件")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{id:"email",name:"email",type:"email",placeholder:"email",autocomplete:"username",required:"",autofocus:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),a("div",{staticClass:"form-label-group mb-3"},[a("label",{attrs:{for:"password"}},[e._v("密碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",name:"password",type:"password",placeholder:"Password",autocomplete:"current-password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),a("button",{staticClass:"btn-signin my-2",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" 登入 ")]),a("div",{staticClass:"mb-2"},[a("p",{staticClass:"signup-direct"},[e._v("還沒有加入My JEANS? 立即"),a("router-link",{staticClass:"signUp",attrs:{to:"/signup"}},[e._v("註冊")]),e._v("吧 ")],1)]),a("button",{staticClass:"btn-signin my-2",attrs:{disabled:e.isProcessing},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.loginByFB.apply(null,arguments)}}},[e._v(" 使用FaceBook登入 ")])])])])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center mb-4"},[a("h1",{staticClass:"signin-title"},[e._v("登入 My JEANS")])])}],n=a("1da1"),o=(a("d9e2"),a("96cf"),a("eae4")),i=a("7696"),c=a("d178"),l={name:"SignIn",components:{Navbar:c["a"]},data:function(){return{email:"",password:"",isProcessing:!1}},methods:{loginByFB:function(){return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{window.location.href="https://mysterious-wave-91363.herokuapp.com/api/auth/facebook"}catch(t){o["a"].fire({title:"無法使用FaceBook登入，請稍後再試"})}case 1:case"end":return e.stop()}}),e)})))()},handleSubmit:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,console.log(e),t.email&&t.password){a.next=5;break}return o["a"].fire({icon:"warning",title:"請填入email和password"}),a.abrupt("return");case 5:return t.isProcessing=!0,a.next=8,i["a"].signIn({email:t.email,password:t.password});case 8:if(s=a.sent,r=s.data,n=s.statusText,"success"===r.status&&"OK"===n){a.next=12;break}throw new Error(r.message);case 12:localStorage.setItem("token",r.token),t.$store.commit("getCurrentUser",r.user),t.$router.push("/home"),a.next=23;break;case 17:a.prev=17,a.t0=a["catch"](0),t.password="",o["a"].fire({title:"請確認您輸入正確的帳號密碼"}),t.isProcessing=!1,console.log("error",a.t0);case 23:case"end":return a.stop()}}),a,null,[[0,17]])})))()}}},u=l,p=(a("63b0"),a("2877")),m=Object(p["a"])(u,s,r,!1,null,"c4003a74",null);t["default"]=m.exports},"63b0":function(e,t,a){"use strict";a("7c20")},7696:function(e,t,a){"use strict";a("b0c0");var s=a("0be2");t["a"]={signIn:function(e){var t=e.email,a=e.password;return s["a"].post("/api/signin",{email:t,password:a})},signUp:function(e){var t=e.name,a=e.email,r=e.password,n=e.passwordCheck;return s["a"].post("/api/signup",{name:t,email:a,password:r,passwordCheck:n})},loginByFB:function(){return console.log("token"),s["a"].post("/auth/facebook",{})}}},"7c20":function(e,t,a){}}]);
//# sourceMappingURL=chunk-230875cc.fcfbe6b5.js.map