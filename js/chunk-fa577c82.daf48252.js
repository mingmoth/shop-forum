(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fa577c82"],{"408a":function(t,e,a){var s=a("e330");t.exports=s(1..valueOf)},"7cb4":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"checkout-page"},[a("Navbar"),a("div",{staticClass:"checkout-container"},[a("div",{staticClass:"main-title"},[t._v("確認購買與選擇付款方式")]),a("div",{staticClass:"page-container"},[a("div",{staticClass:"order-card-wrapper"},[a("div",{staticClass:"order-card"},[t._m(0),a("div",{staticClass:"divider"}),a("div",{staticClass:"card-content"},[a("div",{staticClass:"item-wrapper"},[a("div",{staticClass:"text"},[t._v("數量總計")]),a("div",{staticClass:"total-price"},[t._v(t._s(t.totalQuantity))])]),t._e(),a("div",{staticClass:"divider"}),a("div",{staticClass:"item-wrapper summary"},[a("div",{staticClass:"text"},[t._v("結帳總金額")]),a("div",{staticClass:"total-price"},[t._v(t._s(t._f("priceFormat")(t.getTotalPrice)))])])])])]),a("div",{staticClass:"contact-and-submit"},[a("validation-observer",{ref:"formvalidation",scopedSlots:t._u([{key:"default",fn:function(e){var s=e.handleSubmit,r=e.invalid;return[a("form",{on:{submit:function(e){return e.preventDefault(),s(t.postTradeInfo)}}},[a("div",{staticClass:"title"},[t._v("確認購買與選擇付款方式")]),a("div",{ref:"contact-card",staticClass:"contact-card"},[a("div",{staticClass:"all-wrapper"},[a("validation-provider",{scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("label",{staticClass:"all-text",attrs:{for:"name"}},[t._v("購買人姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],staticClass:"all-input",class:r,attrs:{id:"name",type:"text",disabled:t.tradeInfo.TradeInfo},domProps:{value:t.userName},on:{input:function(e){e.target.composing||(t.userName=e.target.value)}}}),s[0]?a("span",{staticClass:"invalid-text"},[t._v(t._s(s[0].replace("name ","姓名")))]):t._e()]}}],null,!0)})],1),a("div",{staticClass:"all-wrapper"},[a("validation-provider",{scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("label",{staticClass:"all-text",attrs:{for:"email"}},[t._v("購買人電子郵件")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userEmail,expression:"userEmail"}],staticClass:"all-input",class:r,attrs:{id:"email",type:"email",disabled:t.tradeInfo.TradeInfo},domProps:{value:t.userEmail},on:{input:function(e){e.target.composing||(t.userEmail=e.target.value)}}}),s[0]?a("span",{staticClass:"invalid-text"},[t._v(t._s(s[0].replace("email ","電子郵件")))]):t._e()]}}],null,!0)})],1),a("div",{staticClass:"all-wrapper"},[a("validation-provider",{scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("label",{staticClass:"all-text",attrs:{for:"address"}},[t._v("購買人地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userAddress,expression:"userAddress"}],staticClass:"all-input",class:r,attrs:{id:"address",type:"text",disabled:t.tradeInfo.TradeInfo},domProps:{value:t.userAddress},on:{input:function(e){e.target.composing||(t.userAddress=e.target.value)}}}),s[0]?a("span",{staticClass:"invalid-text"},[t._v(t._s(s[0].replace("address ","地址")))]):t._e()]}}],null,!0)})],1),a("div",{staticClass:"all-wrapper"},[a("label",{staticClass:"all-text",attrs:{for:"purpose"}},[t._v("付款方式")]),a("div",{staticClass:"button-wrapper"},t._l(t.payby,(function(e,s){return a("button",{key:"payby-"+s,staticClass:"button",class:{select:t.submitPayby===e},attrs:{disabled:t.tradeInfo.TradeInfo}},[a("span",{staticClass:"text"},[t._v(t._s(e))])])})),0)]),a("div",{staticClass:"all-wrapper"},[a("validation-provider",{attrs:{rules:"max:140"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("label",{staticClass:"all-text",attrs:{for:"note"}},[t._v("其他備註")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.userNote,expression:"userNote"}],staticClass:"all-input text-area",class:r,attrs:{id:"note",placeholder:"有任何特殊需求嗎？可以先寫在這裡喔！",disabled:t.tradeInfo.TradeInfo},domProps:{value:t.userNote},on:{input:function(e){e.target.composing||(t.userNote=e.target.value)}}}),a("div",{staticClass:"note-count"},[t._v("("+t._s(t.userNote.length)+"/140)")]),s[0]?a("span",{staticClass:"invalid-text note-error"},[t._v(t._s(s[0].replace("note ","其他備註")))]):t._e()]}}],null,!0)})],1)]),t.tradeInfo.PayGateWay?t._e():a("div",{staticClass:"submit-button-wrapper"},[a("button",{staticClass:"submit-button",class:{disabled:r},attrs:{type:"submit"}},[a("div",{staticClass:"button"},[t._v("確認購買")])]),a("div",{staticClass:"back-button",on:{click:function(e){return e.preventDefault(),t.$router.go(-1)}}},[a("div",{staticClass:"button"},[t._v("回上一步")])])])])]}}])}),a("form",{attrs:{name:"Spgateway",action:t.tradeInfo.PayGateWay,method:"POST"}},[a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:t.tradeInfo.MerchantID,expression:"tradeInfo.MerchantID"}],attrs:{type:"text",name:"MerchantID"},domProps:{value:t.tradeInfo.MerchantID},on:{input:function(e){e.target.composing||t.$set(t.tradeInfo,"MerchantID",e.target.value)}}}),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:t.tradeInfo.TradeInfo,expression:"tradeInfo.TradeInfo"}],attrs:{type:"text",name:"TradeInfo"},domProps:{value:t.tradeInfo.TradeInfo},on:{input:function(e){e.target.composing||t.$set(t.tradeInfo,"TradeInfo",e.target.value)}}}),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:t.tradeInfo.TradeSha,expression:"tradeInfo.TradeSha"}],attrs:{type:"text",name:"TradeSha"},domProps:{value:t.tradeInfo.TradeSha},on:{input:function(e){e.target.composing||t.$set(t.tradeInfo,"TradeSha",e.target.value)}}}),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"model",rawName:"v-model",value:t.tradeInfo.Version,expression:"tradeInfo.Version"}],attrs:{type:"text",name:"Version"},domProps:{value:t.tradeInfo.Version},on:{input:function(e){e.target.composing||t.$set(t.tradeInfo,"Version",e.target.value)}}}),a("button",{directives:[{name:"show",rawName:"v-show",value:t.tradeInfo.PayGateWay,expression:"tradeInfo.PayGateWay"}],staticClass:"spgateway-button",attrs:{id:"spgateway-button",type:"submit"}},[a("div",{staticClass:"button"},[t._v("前往付款頁面")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tradeInfo.PayGateWay,expression:"tradeInfo.PayGateWay"}],staticClass:"stop-pay-button",on:{click:function(e){return e.preventDefault(),t.$router.go(-1)}}},[a("div",{staticClass:"button"},[t._v("回上一步")])])])],1)])])],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("div",{staticClass:"title"},[t._v("訂單摘要")])])}],n=a("1da1"),i=a("5530"),o=(a("96cf"),a("b0c0"),a("d3b7"),a("159b"),a("a9e3"),a("d9e2"),a("eae4")),l=a("2f62"),c=a("9b2a"),u=a("d178"),d={data:function(){return{payby:["信用卡","ATM轉帳(未開放)"],submitPayby:"信用卡",cart:[],totalPrice:0,totalQuantity:0,userName:"",userEmail:"",userPhone:"",userAddress:"",userNote:"",tradeInfo:{}}},components:{Navbar:u["a"]},created:function(){this.fetchCart(),this.calculateTotalPrice(),this.userName=this.getCurrentUser.name,this.userEmail=this.getCurrentUser.email},computed:Object(i["a"])(Object(i["a"])({},Object(l["d"])(["currentUser","isAuthenticated"])),Object(l["c"])(["getCart","getCartId","getTotalPrice","getCurrentUser"])),methods:{fetchCart:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.$loading.show({isFullPage:!0,opacity:1});try{a.hide()}catch(s){a.hide(),console.log(s)}case 2:case"end":return e.stop()}}),e)})))()},calculateTotalPrice:function(){var t=this;this.totalPrice=0,this.totalQuantity=0,this.getCart.forEach((function(e){t.totalQuantity+=Number(e.quantity)}))},postTradeInfo:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,s,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$loading.show({opacity:1,isFullPage:!0}),e.prev=1,s={amount:t.getTotalPrice,address:t.userAddress,name:t.userName,email:t.userEmail,cartId:t.getCartId},e.next=5,c["a"].postTradeInfo(s);case 5:if(r=e.sent,n=r.data,console.log(n),"success"===n.status){e.next=11;break}throw a.hide(),new Error(n.message);case 11:t.tradeInfo=n.tradeInfo,a.hide(),e.next=20;break;case 15:e.prev=15,e.t0=e["catch"](1),a.hide(),console.log(e.t0),o["a"].fire({title:e.t0.message});case 20:case"end":return e.stop()}}),e,null,[[1,15]])})))()}}},v=d,p=(a("e8a5"),a("2877")),f=Object(p["a"])(v,s,r,!1,null,"13905909",null);e["default"]=f.exports},a9e3:function(t,e,a){"use strict";var s=a("83ab"),r=a("da84"),n=a("e330"),i=a("94ca"),o=a("6eeb"),l=a("1a2d"),c=a("7156"),u=a("3a9b"),d=a("d9b5"),v=a("c04e"),p=a("d039"),f=a("241c").f,m=a("06cf").f,b=a("9bf2").f,h=a("408a"),I=a("58a8").trim,g="Number",C=r[g],w=C.prototype,y=r.TypeError,_=n("".slice),N=n("".charCodeAt),x=function(t){var e=v(t,"number");return"bigint"==typeof e?e:T(e)},T=function(t){var e,a,s,r,n,i,o,l,c=v(t,"number");if(d(c))throw y("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=I(c),e=N(c,0),43===e||45===e){if(a=N(c,2),88===a||120===a)return NaN}else if(48===e){switch(N(c,1)){case 66:case 98:s=2,r=49;break;case 79:case 111:s=8,r=55;break;default:return+c}for(n=_(c,2),i=n.length,o=0;o<i;o++)if(l=N(n,o),l<48||l>r)return NaN;return parseInt(n,s)}return+c};if(i(g,!C(" 0o1")||!C("0b1")||C("+0x1"))){for(var P,E=function(t){var e=arguments.length<1?0:C(x(t)),a=this;return u(w,a)&&p((function(){h(a)}))?c(Object(e),a,E):e},k=s?f(C):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),S=0;k.length>S;S++)l(C,P=k[S])&&!l(E,P)&&b(E,P,m(C,P));E.prototype=w,w.constructor=E,o(r,g,E)}},ca65:function(t,e,a){},e8a5:function(t,e,a){"use strict";a("ca65")}}]);
//# sourceMappingURL=chunk-fa577c82.daf48252.js.map